---
title: 设计模式笔记
time:  
tags: [learn,Program,c++]
categories: program
---



# 设计模式

## 面向对象的设计原则

<!-- more -->

1. 依赖倒置原则（DIP）
    - 高层不依赖底层，二者应该依赖抽象（底层抽象？）
    - 抽象不依赖于实现，说一下给依赖于抽象
2. 开放封闭原则（OCP）
    - 对扩展开放，对更改封闭
    - 类模块可扩展但不可修改
3. 单一职责原则（SRP）
    - 一个类应该仅有一个引起它变化的原因
    - 变化的方向隐含着类的责任
4. Liskov 替换原则（LSP）
    - 子类必须能够替代他们的基类（IS-A）
    - 继承表达类型抽象
5. 接口隔离原则（ISP）
    - 不应该强迫客户程序依赖他们不用的方法
    - 接口应该小而完备
6. 优先使用对象组合，而不是继承
    - 类继承通常为”白箱复用“，对象组合通常为”黑箱复用“
    - 继承在某种程度上破坏了封装性，子类父类耦合度高
    - 对象组合只要求倍组合的对象具有良好的定义的接口，耦合低
7. 封装变化点
    - 封装来创建对象之间的分解层。让设计者可以在一侧修改。而不对另一侧造成影响
8. 针对接口编程，不是针对实现编程
    - 不将变量类型声明为某个特定的具体类，而是声明为某个接口
    - 客户程序无需获知对象的具体类型，只需要知道对象所具有的接口
    - 减少系统中各部分的依赖关系，实现”高内聚，松（低）耦合“

##### 总结

- 设计习语（Design Idioms）

    描述特定编程语言相关的底层模式，技巧习惯用法

- 设计模式（Design Patterns）

    类与相互通信的对象之间的组织协作关系

- 架构模式（Architectural Patterns）

    系统与基本组织结构关系密切的高层模式，包括子系统划分，职责，以及如何组织





### 分类

##### GOF-23模式分类

- 从目的来看
    1. 创建型（Creational）模式：将对象的部分创建工作用子类或者其他对象
    2. 结构型（Structural）模式：通过类继承或者对象组合，应对需求变化为对象结构带来的冲击
    3. 行为型（Behavioral）迷失：通过类继承或者对象组合，交互中的责任划分

- 从范围来看：
    1. 类模式处理类与子类的静态关系
    2. 对象模式处理对象间的动态关系

##### 封装变化角度模式分类

- 组件协作：通过晚绑定，实现框架和应用程序之间的松耦合，是二者协作时

    Template Method

    Strategy

    Observer/Event

- 单一职责

- 对象创建

- 对象性能

- 接口隔离

- 数据结构

- 行为变化

- 领域问题



### 通过重构使用设计模式

**重构关键技法**

- 静态  --- 动态
- 早绑定 --- 晚绑定
- 继承  ---  组合
- 编译时依赖 --- 运行时依赖
- 紧耦合 --- 松耦合



## 模板方法（Template Method）

- 定义

    定义一个操作种的算法的骨架，而将一些步骤延迟到子类中。 Template Method使得子类可以不改变算法的结构即可重定义（override），晚绑定

- 使用动机：

    某项任务，有稳定的整体，子步骤有很多改变需求
    
- 总结

    - 非常基础性的设计模式，机制简洁（虚函数）
    - 反向控制价结构
    - 虚方法可以有也可以没有实现，设计为protected最佳

## 策略模式（Strategy）

- 动机

    某系对象使用的算法可能多种多样，经常改变

